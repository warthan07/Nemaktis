

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; Nemaktis 1.0.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ray-tracing backend" href="../backends/rtm.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Nemaktis
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">High-level python interface</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#directorfield">DirectorField</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lcmaterial">LCMaterial</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lightpropagator">LightPropagator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#opticalfields">OpticalFields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fieldviewer">FieldViewer</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Backends</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../backends/rtm.html">Ray-tracing backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backends/bpm.html">Beam propagation backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backends/dtmm.html">Diffractive transfer matrix backend</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nemaktis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/high_level/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="directorfield">
<h2>DirectorField<a class="headerlink" href="#directorfield" title="Permalink to this headline">¶</a></h2>
<span class="target" id="id1"></span><dl class="class">
<dt id="nemaktis.lc_material.DirectorField">
<em class="property">class </em><code class="sig-prename descclassname">nemaktis.lc_material.</code><code class="sig-name descname">DirectorField</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField" title="Permalink to this definition">¶</a></dt>
<dd><p>The DirectorField class stores the director field and mesh
informations. It is initialized given either the lengths and
dimensions of the associated 3D mesh or a path to a vti file
containing the director field and mesh details.</p>
<p>In the first version of this constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nfield</span> <span class="o">=</span> <span class="n">DirectorField</span><span class="p">(</span>
    <span class="n">mesh_lengths</span><span class="o">=</span><span class="p">(</span><span class="n">Lx</span><span class="p">,</span><span class="n">Ly</span><span class="p">,</span><span class="n">Lz</span><span class="p">),</span> <span class="n">mesh_dimensions</span><span class="o">=</span><span class="p">(</span><span class="n">Nx</span><span class="p">,</span><span class="n">Ny</span><span class="p">,</span><span class="n">Nz</span><span class="p">))</span>
</pre></div>
</div>
<p>the actual values of the director field needs to be provided later
using the “init_from_funcs” method or via the setter method “vals”
(numpy array of shape (Nz,Ny,Nx,3)). The mesh lengths needs to be
specified in micrometer.</p>
<p>In the second version of this constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nfield</span> <span class="o">=</span> <span class="n">DirectorField</span><span class="p">(</span><span class="n">vti_file</span><span class="o">=</span><span class="s2">&quot;path to vti file&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>the values of the director field and the details of the mesh are
automatically assigned from the vti file.</p>
<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.set_mask">
<code class="sig-name descname">set_mask</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">mask_type</em>, <em class="sig-param">mask_formula=None</em>, <em class="sig-param">mask_ndarray=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.set_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a boolean mask for the LC domain. This method allows to specifify complex shape
for the LC domain inside the regular cartesian mesh specified at construction.</p>
<p>Three possible ways of initializing the mask are possible. If you simply want to
specify a spherical domain for a droplet centered on the mesh and of diameter equal to
the mesh length along z, call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nfield</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="n">mask_type</span><span class="o">=</span><span class="s2">&quot;droplet&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use a string formula depending on the space variables <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and
<code class="docutils literal notranslate"><span class="pre">z</span></code> and which must evaluates to True if the associated point is inside the LC
domain, else False:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nfield</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="n">mask_type</span><span class="o">=</span><span class="s2">&quot;formula&quot;</span><span class="p">,</span> <span class="n">mask_formula</span><span class="o">=</span><span class="s2">&quot;your formula&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, you can directly gives a boolean numpy array of shape (Nz,Ny,Nx), where each
value in this array must be True if the associated mesh point is inside the LC domain,
else False:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nfield</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="n">mask_type</span><span class="o">=</span><span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="n">mask_ndarray</span><span class="o">=</span><span class="n">your_mask_array</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.delete_mask">
<code class="sig-name descname">delete_mask</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.delete_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the current LC mask.</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.mask_type">
<em class="property">property </em><code class="sig-name descname">mask_type</code><a class="headerlink" href="#nemaktis.lc_material.DirectorField.mask_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mask type: “droplet”, “formula” or “raw”.</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.mask_formula">
<em class="property">property </em><code class="sig-name descname">mask_formula</code><a class="headerlink" href="#nemaktis.lc_material.DirectorField.mask_formula" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the LC mask formula if it was set, else returns None.</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.mask_vals">
<em class="property">property </em><code class="sig-name descname">mask_vals</code><a class="headerlink" href="#nemaktis.lc_material.DirectorField.mask_vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the LC mask boolean array.</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.extend">
<code class="sig-name descname">extend</code><span class="sig-paren">(</span><em class="sig-param">scale_x</em>, <em class="sig-param">scale_y</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the computational mesh in the <code class="docutils literal notranslate"><span class="pre">xy</span></code> plane by padding new points near the <code class="docutils literal notranslate"><span class="pre">x</span></code>
and <code class="docutils literal notranslate"><span class="pre">y</span></code> boundaries. These new points are initialized with the edge value of the
director field on the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> boundaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale_x</strong> (<em>float</em>) – The mesh length in the x-direction will be scaled by this factor.</p></li>
<li><p><strong>scale_y</strong> (<em>float</em>) – The mesh length in the y-direction will be scaled by this factor.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.rotate_90deg">
<code class="sig-name descname">rotate_90deg</code><span class="sig-paren">(</span><em class="sig-param">axis</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.rotate_90deg" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the director field by 90 degrees around the specified axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>axis</strong> (<em>str</em>) – Axis around which to perform the rotation. Need to be under the form ‘[s]A’ where
the optional parameter ‘s’=’+’ or ‘-‘ decribes the sign of rotation and ‘A’=’x’,
‘y’ or ‘z’ defines the rotation axis.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.rotate_180deg">
<code class="sig-name descname">rotate_180deg</code><span class="sig-paren">(</span><em class="sig-param">axis</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.rotate_180deg" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the director field by 180 degrees around the specified axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>axis</strong> (<em>str</em>) – Axis around which to perform the rotation. Need to be under the form ‘A’ where
‘A’=’x’, ‘y’ or ‘z’ defines the rotation axis.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.vals">
<em class="property">property </em><code class="sig-name descname">vals</code><a class="headerlink" href="#nemaktis.lc_material.DirectorField.vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array for the director values, of shape (Nz,Ny,Nx,3).</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.init_from_funcs">
<code class="sig-name descname">init_from_funcs</code><span class="sig-paren">(</span><em class="sig-param">nx_func</em>, <em class="sig-param">ny_func</em>, <em class="sig-param">nz_func</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.init_from_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the director field from three functions for each of its component. The
functions must depends on the space variables <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code>. We recall that
the mesh is centered on the origin.</p>
<p>If the given function are numpy-vectorizable, this function should be pretty fast. If
not, a warning will be printed and the given function will be vectorized with the
numpy method <code class="docutils literal notranslate"><span class="pre">vectorize</span></code> (in which case you should expect a much slower execution
time).</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.normalize">
<code class="sig-name descname">normalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the director field values to 1.</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.save_to_vti">
<code class="sig-name descname">save_to_vti</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.save_to_vti" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the director field into a vti file.</p>
<p>The “.vti” extension is automatically appended, no need to include it in the filename
parameter (but in case you do only one extension will be added)</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.get_pos">
<code class="sig-name descname">get_pos</code><span class="sig-paren">(</span><em class="sig-param">ix</em>, <em class="sig-param">iy</em>, <em class="sig-param">iz</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.get_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the spatial position associated with the mesh indices (ix,iy,iz)</p>
<p>It is assumed that the mesh is centered on the origin (0,0,0).</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.get_mesh_dimensions">
<code class="sig-name descname">get_mesh_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.get_mesh_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the dimensions (Nx,Ny,Nz) of the simulation mesh</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.get_mesh_lengths">
<code class="sig-name descname">get_mesh_lengths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.get_mesh_lengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lengths (Lx,Ly,Lz) of the simulation mesh</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.get_mesh_spacings">
<code class="sig-name descname">get_mesh_spacings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.get_mesh_spacings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the spacings (dx,dy,dz) of the simulation mesh</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.lc_material.DirectorField.get_n_vertices">
<code class="sig-name descname">get_n_vertices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.DirectorField.get_n_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of vertices in the simulation mesh</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="lcmaterial">
<h2>LCMaterial<a class="headerlink" href="#lcmaterial" title="Permalink to this headline">¶</a></h2>
<span class="target" id="id2"></span><dl class="class">
<dt id="nemaktis.lc_material.LCMaterial">
<em class="property">class </em><code class="sig-prename descclassname">nemaktis.lc_material.</code><code class="sig-name descname">LCMaterial</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">director_field</em>, <em class="sig-param">ne</em>, <em class="sig-param">no</em>, <em class="sig-param">nhost=1</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.LCMaterial" title="Permalink to this definition">¶</a></dt>
<dd><p>A class containing the director field data, simulation mesh, and
physics constants.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>director_field</strong> (<a class="reference internal" href="#nemaktis.lc_material.DirectorField" title="nemaktis.lc_material.DirectorField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DirectorField</span></code></a> object) – </p></li>
<li><p><strong>ne</strong> (<em>float</em><em> or </em><em>math string depending on the wavelength variable &quot;lambda&quot;</em><em> (</em><em>µm</em><em>)</em>) – The extraordinary refractive index associated with the LC
material.</p></li>
<li><p><strong>no</strong> (<em>float</em><em> or </em><em>math string depending on the wavelength variable &quot;lambda&quot;</em><em> (</em><em>µm</em><em>)</em>) – The ordinary refractive index associated with the LC material.</p></li>
<li><p><strong>nhost</strong> (<em>optional</em><em>, </em><em>float</em><em> or </em><em>math string depending on the wavelength variable &quot;lambda&quot;</em><em> (</em><em>µm</em><em>)</em>) – The refractive index associated with an eventual host fluid in which the LC domain
is embedded (see DirectorField.set_mask).</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="nemaktis.lc_material.LCMaterial.add_isotropic_layer">
<code class="sig-name descname">add_isotropic_layer</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">nlayer</em>, <em class="sig-param">thickness</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.lc_material.LCMaterial.add_isotropic_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an isotropic layer above the sample.  Light is assumed to propagate in the
z-direction, and will cross first the LC material, and then the isotropic layers
specified with this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nlayer</strong> (<em>float</em>) – Refractive index of the new isotropic layer</p></li>
<li><p><strong>thickness</strong> (<em>float</em>) – Thickness (µm) of the new isotropic layer</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="lightpropagator">
<h2>LightPropagator<a class="headerlink" href="#lightpropagator" title="Permalink to this headline">¶</a></h2>
<span class="target" id="id3"></span><dl class="class">
<dt id="nemaktis.light_propagator.LightPropagator">
<em class="property">class </em><code class="sig-prename descclassname">nemaktis.light_propagator.</code><code class="sig-name descname">LightPropagator</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">material</em>, <em class="sig-param">wavelengths</em>, <em class="sig-param">numerical_aperture</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.LightPropagator" title="Permalink to this definition">¶</a></dt>
<dd><p>The LightPropagator class allows to propagate optical fields through a LC sample.
The simulation and choice of backend is done by calling the method <code class="docutils literal notranslate"><span class="pre">propagate_field</span></code>.
For each wavelength specified at construction, two simulations are done: one with a light
source polarised along x, and one with a light source polarised along y. This allows us to
fully caracterize the transmission of the LC sample and reconstruct any kind of optical
micrograph.</p>
<p>Currently, we only support single plane-wave source with input fields propagating along
<code class="docutils literal notranslate"><span class="pre">z</span></code>. If you want to take into account input numerical aperture effect, you need to use
the <code class="docutils literal notranslate"><span class="pre">dtmm</span></code> backend directly (this may change in a future version). However, we do
support numerical aperture effect due to the microscope objective (i.e. on the output
side).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>material</strong> (<a class="reference internal" href="#nemaktis.lc_material.LCMaterial" title="nemaktis.lc_material.LCMaterial"><code class="xref py py-class docutils literal notranslate"><span class="pre">LCMaterial</span></code></a> object) – </p></li>
<li><p><strong>wavelengths</strong> (<em>array-like object</em>) – An array containing all the wavelengths of the spectrum for the light source.</p></li>
<li><p><strong>numerical_aperture</strong> (<em>float</em>) – Sets the numerical aperture for the microscope objective.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="nemaktis.light_propagator.LightPropagator.material">
<em class="property">property </em><code class="sig-name descname">material</code><a class="headerlink" href="#nemaktis.light_propagator.LightPropagator.material" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current LC material</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.LightPropagator.propagate_fields">
<code class="sig-name descname">propagate_fields</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">method</em>, <em class="sig-param">bulk_filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.LightPropagator.propagate_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagate optical fields through the LC sample using the specified backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>&quot;bpm&quot; | &quot;dtmm&quot;</em>) – <p>If equal to “bpm”, the beam propagation backend will be used. Should be used
if accuracy is privileged over speed.</p>
<p>If equal to “dtmm”, the diffractive transfer matrix backend will be used. Should
be used if speed is privileged over accuracy.</p>
</p></li>
<li><p><strong>bulk_filename</strong> (<em>None</em><em> or </em><em>string</em>) – If none, the backend will not export the bulk value of the optical fields in the
LC layer.  Else, the bulk fields values will be exported to a vti file whose
basename is set by this parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="opticalfields">
<h2>OpticalFields<a class="headerlink" href="#opticalfields" title="Permalink to this headline">¶</a></h2>
<span class="target" id="id4"></span><dl class="class">
<dt id="nemaktis.light_propagator.OpticalFields">
<em class="property">class </em><code class="sig-prename descclassname">nemaktis.light_propagator.</code><code class="sig-name descname">OpticalFields</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields" title="Permalink to this definition">¶</a></dt>
<dd><p>The OpticalFields object stores the mesh information of the transverse mesh (plane mesh
orthogonal to the z-direction, default altitude of 0) and the optical fields values on
this mesh.  Since this python package is mainly used to reconstruct micrographs, we only
store internally the complex horizontal electric field for two simulation: one with a
light source polarised along <code class="docutils literal notranslate"><span class="pre">x</span></code>, and the other with a light source polarised along
<code class="docutils literal notranslate"><span class="pre">y</span></code>.  In case multiple wavelengths were used in the simulation, we store these
quantities separately for each wavelength.</p>
<p>This class is initialised given either a wavelength array and the lengths and dimensions
of the 2D mesh for the transverse fields or a path to a vti file containing previously
calculated optical fields and mesh details.</p>
<p>In the first version of this constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">optical_fields</span> <span class="o">=</span> <span class="n">OpticalFields</span><span class="p">(</span>
    <span class="n">wavelengths</span><span class="o">=</span><span class="p">[</span><span class="n">l0</span><span class="p">,</span><span class="n">l1</span><span class="p">,</span><span class="o">...</span><span class="p">,</span><span class="n">lN</span><span class="p">],</span> <span class="n">mesh_lengths</span><span class="o">=</span><span class="p">(</span><span class="n">Lx</span><span class="p">,</span><span class="n">Ly</span><span class="p">),</span> <span class="n">mesh_dimensions</span><span class="o">=</span><span class="p">(</span><span class="n">Nx</span><span class="p">,</span><span class="n">Ny</span><span class="p">))</span>
</pre></div>
</div>
<p>the actual values of the transverse fields needs to be provided later using the raw
setter method fields_vals (shape (N_wavelengths,4,Ny,Nx)).</p>
<p>In the second version of this constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">optical_fields</span> <span class="o">=</span> <span class="n">OpticalFields</span><span class="p">(</span><span class="n">vti_file</span><span class="o">=</span><span class="s2">&quot;path to vti file&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>the values of the wavelengths and transverse fields are automatically assigned from the
vti file.</p>
<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a hard copy of this OpticalFields object</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.vals">
<em class="property">property </em><code class="sig-name descname">vals</code><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy array for the optical fields values, of shape (N_wavelengths,4,Ny,Nx).</p>
<p>If you want to initialize by hand the optical fields, the four components in the
second dimension correspond to:</p>
<ul class="simple">
<li><p>complex Ex field for an input polarisation//x</p></li>
<li><p>complex Ey field for an input polarisation//x</p></li>
<li><p>complex Ex field for an input polarisation//y</p></li>
<li><p>complex Ey field for an input polarisation//y</p></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.propagate">
<code class="sig-name descname">propagate</code><span class="sig-paren">(</span><em class="sig-param">new_z</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.propagate" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagate the optical fields to a new transverse plane at altitude <code class="docutils literal notranslate"><span class="pre">new_z</span></code>
by switching to Fourier space and using the exact propagator for the Helmholtz
equation in free space.</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.save_to_vti">
<code class="sig-name descname">save_to_vti</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.save_to_vti" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the optical fields into a vti file.</p>
<p>The “.vti” extension is automatically appended, no need to include it in the filename
parameter (but in case you do only one extension will be added)</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.get_pos">
<code class="sig-name descname">get_pos</code><span class="sig-paren">(</span><em class="sig-param">ix</em>, <em class="sig-param">iy</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.get_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the position associated with the mesh indices (ix,iy)</p>
<p>It is assumed that the mesh is centered on the origin (0,0).</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.get_wavelengths">
<code class="sig-name descname">get_wavelengths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.get_wavelengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the wavelength array</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.get_mesh_dimensions">
<code class="sig-name descname">get_mesh_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.get_mesh_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the dimensions (Nx,Ny) of the transverse mesh</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.get_mesh_lengths">
<code class="sig-name descname">get_mesh_lengths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.get_mesh_lengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lengths (Lx,Ly) of the transverse mesh</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.get_mesh_spacings">
<code class="sig-name descname">get_mesh_spacings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.get_mesh_spacings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the spacings (dx,dy,dz) of the transverse mesh</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.light_propagator.OpticalFields.get_n_vertices">
<code class="sig-name descname">get_n_vertices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.light_propagator.OpticalFields.get_n_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of vertices in the transverse mesh</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="fieldviewer">
<h2>FieldViewer<a class="headerlink" href="#fieldviewer" title="Permalink to this headline">¶</a></h2>
<span class="target" id="id5"></span><dl class="class">
<dt id="nemaktis.field_viewer.FieldViewer">
<em class="property">class </em><code class="sig-prename descclassname">nemaktis.field_viewer.</code><code class="sig-name descname">FieldViewer</code><span class="sig-paren">(</span><em class="sig-param">optical_fields</em>, <em class="sig-param">cmf=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer" title="Permalink to this definition">¶</a></dt>
<dd><p>A class allowing to recombine optical fields to generate optical micrographs like in a real
microscope.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optical_fields</strong> (<a class="reference internal" href="#nemaktis.light_propagator.OpticalFields" title="nemaktis.light_propagator.OpticalFields"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpticalFields</span></code></a> object) – Can be created either by a LightPropagator or directly by importing a vti file
exported in a previous simulation.</p></li>
<li><p><strong>cmf</strong> (<em>numpy ndarray</em>) – A color matching array created with the <cite>dtmm</cite> package,
see <a class="reference external" href="https://dtmm.readthedocs.io/en/latest/reference.html#module-dtmm.color">https://dtmm.readthedocs.io/en/latest/reference.html#module-dtmm.color</a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.polariser">
<code class="sig-name descname">polariser</code><em class="property"> = True</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.polariser" title="Permalink to this definition">¶</a></dt>
<dd><p>Is there a polariser in the optical setup?</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.analyser">
<code class="sig-name descname">analyser</code><em class="property"> = True</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.analyser" title="Permalink to this definition">¶</a></dt>
<dd><p>Is there an analyser in the optical setup?</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.compensator">
<code class="sig-name descname">compensator</code><em class="property"> = 'No'</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.compensator" title="Permalink to this definition">¶</a></dt>
<dd><p>If “No”, remove the compensator from the optical setup. Other values set the type of
compensator:</p>
<ul class="simple">
<li><p>“Quarter-wave”: An achromatic quarter-wave compensator</p></li>
<li><p>“Half-wave”: An achromatic half-wave compensator</p></li>
<li><p>“Tint-sensitive”: a full-wave compensator at 540 nm.</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.polariser_angle">
<code class="sig-name descname">polariser_angle</code><em class="property"> = 0</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.polariser_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle (in degree) between the privileged axis of the polariser and the x-axis</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.analyser_angle">
<code class="sig-name descname">analyser_angle</code><em class="property"> = 90</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.analyser_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle (in degree) between the privileged axis of the analyser and the x-axis</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.compensator_angle">
<code class="sig-name descname">compensator_angle</code><em class="property"> = 0</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.compensator_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle (in degree) between the fast axis of the compensator and the x-axis</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.n_tiles_x">
<code class="sig-name descname">n_tiles_x</code><em class="property"> = 1</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.n_tiles_x" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of repetitions of the micrograph in the x-direction</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.n_tiles_y">
<code class="sig-name descname">n_tiles_y</code><em class="property"> = 1</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.n_tiles_y" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of repetitions of the micrograph in the y-direction</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.grayscale">
<code class="sig-name descname">grayscale</code><em class="property"> = False</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.grayscale" title="Permalink to this definition">¶</a></dt>
<dd><p>Should we calculate a grayscale micrograph (True) or a color micrograph (False)</p>
</dd></dl>

<dl class="attribute">
<dt id="nemaktis.field_viewer.FieldViewer.intensity">
<code class="sig-name descname">intensity</code><em class="property"> = 1</em><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>Intensity factor of the micrograph</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.field_viewer.FieldViewer.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a graphical user interface allowing to dynamically adjust
the attributes of this class and visualize the associated
micrographs in real-time.</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.field_viewer.FieldViewer.z_focus">
<em class="property">property </em><code class="sig-name descname">z_focus</code><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.z_focus" title="Permalink to this definition">¶</a></dt>
<dd><p>Current vertical position of the focal plane</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.field_viewer.FieldViewer.get_image">
<code class="sig-name descname">get_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.get_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current micrograph as a numpy array of shape (Ny,Nx,3|1),
(last dim is 3 if in color mode, 1 if in grayscale mode).</p>
</dd></dl>

<dl class="method">
<dt id="nemaktis.field_viewer.FieldViewer.update_image">
<code class="sig-name descname">update_image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nemaktis.field_viewer.FieldViewer.update_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Recompute the micrograph from the optical fields data</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../backends/rtm.html" class="btn btn-neutral float-right" title="Ray-tracing backend" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorial.html" class="btn btn-neutral float-left" title="Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Guilhem Poy, Andrej Petelin

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>